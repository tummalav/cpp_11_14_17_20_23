â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          ULTRA LOW LATENCY CONTAINERS - QUICK REFERENCE CARD             â•‘
â•‘                    For HFT/Trading Systems on RHEL/macOS                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ CRITICAL PATH (<500ns) - USE THESE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sequential:                                                             â”‚
â”‚   âœ… std::array<T, N>              - 20-50ns   (ZERO heap, stack)       â”‚
â”‚   âœ… boost::static_vector<T, N>    - 30-80ns   (ZERO heap, dynamic)     â”‚
â”‚   âœ… absl::InlinedVector<T, N>     - 35-90ns   (SSO, Google)            â”‚
â”‚                                                                          â”‚
â”‚ Lookup:                                                                  â”‚
â”‚   âœ… boost::flat_map               - 10-50ns   (best cache locality)    â”‚
â”‚   âœ… absl::flat_hash_map           - 15-60ns   (Swiss table)            â”‚
â”‚                                                                          â”‚
â”‚ Thread Communication:                                                    â”‚
â”‚   âœ… boost::lockfree::spsc_queue   - 50-200ns  (best SPSC)              â”‚
â”‚   âœ… folly::ProducerConsumerQueue  - 80-250ns  (Facebook SPSC)          â”‚
â”‚                                                                          â”‚
â”‚ Memory:                                                                  â”‚
â”‚   âœ… boost::object_pool            - 10-50ns   (vs new/delete 50-500ns) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  AVOID IN HOT PATH                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   âŒ std::list                     - 500-2000ns (pointer chasing)       â”‚
â”‚   âŒ std::map                      - 50-200ns   (worse than flat_map)   â”‚
â”‚   âŒ new/delete                    - 50-500ns   (use object pool)       â”‚
â”‚   âŒ std::mutex locks              - 1-5Î¼s      (use lock-free)         â”‚
â”‚   âŒ Dynamic allocations           - Variable   (pre-allocate!)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š COMPLETE LATENCY TABLE (P50 / P99)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SEQUENTIAL CONTAINERS                                                    â”‚
â”‚   std::array                       20-50ns  / 80ns    âœ… ZERO heap      â”‚
â”‚   boost::static_vector             30-80ns  / 150ns   âœ… ZERO heap      â”‚
â”‚   absl::InlinedVector              35-90ns  / 160ns   âœ… ZERO (small)   â”‚
â”‚   folly::small_vector              40-100ns / 180ns   âœ… ZERO (small)   â”‚
â”‚   std::vector (reserved)           100-200ns/ 400ns   Single alloc      â”‚
â”‚   folly::fbvector                  90-180ns / 380ns   Optimized         â”‚
â”‚   std::deque                       200-500ns/ 1Î¼s     Multiple alloc    â”‚
â”‚   std::list                        500-2Î¼s  / 5Î¼s     âŒ Per-element    â”‚
â”‚                                                                          â”‚
â”‚ ASSOCIATIVE CONTAINERS (Lookup latency)                                 â”‚
â”‚   boost::flat_map                  10-50ns  / 100ns   âœ… Best cache     â”‚
â”‚   absl::flat_hash_map              15-60ns  / 120ns   âœ… Swiss table    â”‚
â”‚   absl::btree_map                  30-120ns / 250ns   âœ… Cache-friendly â”‚
â”‚   std::unordered_map               30-100ns / 200ns   Hash table        â”‚
â”‚   std::map                         50-200ns / 500ns   âŒ Tree           â”‚
â”‚                                                                          â”‚
â”‚ LOCK-FREE QUEUES                                                         â”‚
â”‚   boost::lockfree::spsc_queue      50-200ns / 500ns   âœ… Best SPSC      â”‚
â”‚   folly::ProducerConsumerQueue     80-250ns / 600ns   âœ… Facebook SPSC  â”‚
â”‚   boost::lockfree::queue (MPMC)    200-800ns/ 2Î¼s     Multi P/C         â”‚
â”‚   folly::MPMCQueue                 300-1.2Î¼s/ 3Î¼s     âœ… Facebook MPMC  â”‚
â”‚                                                                          â”‚
â”‚ MEMORY MANAGEMENT                                                        â”‚
â”‚   boost::object_pool               10-50ns  / 100ns   âœ… Pooling        â”‚
â”‚   new/delete                       50-500ns / 5Î¼s     âŒ Avoid          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ COMPILATION (macOS)                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Install:                                                                 â”‚
â”‚   brew install boost abseil folly                                        â”‚
â”‚                                                                          â”‚
â”‚ Compile:                                                                 â”‚
â”‚   g++ -std=c++20 -O3 -march=native -DNDEBUG \                            â”‚
â”‚       your_code.cpp \                                                    â”‚
â”‚       -I/opt/homebrew/include -L/opt/homebrew/lib \                      â”‚
â”‚       -lboost_system -labsl_base -labsl_hash -labsl_raw_hash_set \       â”‚
â”‚       -lfolly -lglog -lgflags -lfmt -ldouble-conversion \                â”‚
â”‚       -lpthread -o your_app                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ RHEL OPTIMIZATIONS                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPU Pinning:                                                             â”‚
â”‚   taskset -c 2,3,4,5 ./trading_app                                       â”‚
â”‚                                                                          â”‚
â”‚ Priority:                                                                â”‚
â”‚   sudo nice -n -20 ./trading_app                                         â”‚
â”‚                                                                          â”‚
â”‚ Huge Pages:                                                              â”‚
â”‚   echo 1024 > /proc/sys/vm/nr_hugepages                                  â”‚
â”‚                                                                          â”‚
â”‚ Disable NUMA:                                                            â”‚
â”‚   echo 0 > /proc/sys/kernel/numa_balancing                               â”‚
â”‚                                                                          â”‚
â”‚ CPU Governor:                                                            â”‚
â”‚   cpupower frequency-set -g performance                                  â”‚
â”‚                                                                          â”‚
â”‚ Isolate CPUs (GRUB):                                                     â”‚
â”‚   isolcpus=2-7 nohz_full=2-7 rcu_nocbs=2-7                               â”‚
â”‚                                                                          â”‚
â”‚ Disable C-states (GRUB):                                                 â”‚
â”‚   intel_idle.max_cstate=0 processor.max_cstate=1                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ GOLDEN RULES FOR SUB-MICROSECOND LATENCY                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. âœ… Pre-allocate EVERYTHING at startup (reserve(), resize())           â”‚
â”‚ 2. âœ… Use stack/static storage when possible (std::array)                â”‚
â”‚ 3. âœ… Prefer contiguous memory (vector > list)                           â”‚
â”‚ 4. âœ… Use lock-free for threads (boost::lockfree::spsc_queue)            â”‚
â”‚ 5. âœ… Object pools for recycling (boost::object_pool)                    â”‚
â”‚ 6. âœ… Cache alignment (alignas(64) for shared data)                      â”‚
â”‚ 7. âŒ NO dynamic allocations in hot path                                 â”‚
â”‚ 8. âŒ NO std::mutex in critical path (1-5Î¼s overhead)                    â”‚
â”‚ 9. âŒ NO std::list or std::map (cache misses)                            â”‚
â”‚ 10. ğŸ“Š MEASURE EVERYTHING with perf, vtune, cachegrind                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ˆ USE CASE EXAMPLES                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Order Book (Price Levels):                                              â”‚
â”‚   boost::flat_map<Price, Volume>  // 10-50ns lookup                     â”‚
â”‚                                                                          â”‚
â”‚ Market Data Feed â†’ Processor:                                            â”‚
â”‚   boost::lockfree::spsc_queue<Quote>  // 50-200ns                        â”‚
â”‚                                                                          â”‚
â”‚ Symbol â†’ Last Price Map:                                                 â”‚
â”‚   absl::flat_hash_map<Symbol, Price>  // 15-60ns lookup                 â”‚
â”‚                                                                          â”‚
â”‚ Pending Orders (Small, Fast):                                            â”‚
â”‚   std::array<Order, 100>  // 20-50ns, ZERO heap                         â”‚
â”‚                                                                          â”‚
â”‚ Order Recycling:                                                         â”‚
â”‚   boost::object_pool<Order>  // 10-50ns vs new/delete 50-500ns          â”‚
â”‚                                                                          â”‚
â”‚ Multi-Feed Aggregation:                                                  â”‚
â”‚   folly::MPMCQueue<MarketData>  // 300-1200ns                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¬ PROFILING COMMANDS                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cache Analysis:                                                          â”‚
â”‚   perf stat -e cache-misses,cache-references ./app                       â”‚
â”‚                                                                          â”‚
â”‚ Detailed Cache:                                                          â”‚
â”‚   valgrind --tool=cachegrind ./app                                       â”‚
â”‚                                                                          â”‚
â”‚ CPU Hotspots:                                                            â”‚
â”‚   perf record -g ./app                                                   â”‚
â”‚   perf report                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Files: ultra_low_latency_containers_comparison.cpp, build_containers_benchmark.sh
Run:   ./build_containers_benchmark.sh && ./containers_benchmark
Docs:  CONTAINERS_BENCHMARK_README.md
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

